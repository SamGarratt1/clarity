<!doctype html>
<html lang="en">
<head>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clarity Health Concierge ‚Äî AI Appointment Assistant</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Simple SVG favicon -->
<link rel="icon" href="favicon.svg" type="image/svg+xml">

</head>

<!-- Chat widget -->
<div id="chat-root" class="chat">
  <button id="chat-toggle" class="chat__fab" aria-label="Open chat">üí¨</button>

  <div id="chat-panel" class="chat__panel" hidden>
    <div class="chat__head">
      <div class="chat__brand">Clarity Assistant</div>
      <button id="chat-close" class="chat__close" aria-label="Close">√ó</button>
    </div>

    <div id="chat-log" class="chat__log" role="log" aria-live="polite"></div>

    <form id="chat-form" class="chat__form" autocomplete="off">
      <input id="chat-input" class="chat__input" type="text" placeholder="Type here‚Ä¶" />
      <button class="chat__send" type="submit">Send</button>
    </form>

    <div class="chat__quick">
      <button class="chip" data-q="NEW">Start</button>
      <button class="chip" data-q="MINE">My clinic</button>
      <button class="chip" data-q="NEARBY">Nearby</button>
      <button class="chip" data-q="HELP">Help</button>
    </div>
  </div>
</div>

<script src="app.js"></script>
<!-- ===== Clarity Chat (self-contained) ===== -->
<style>
  :root{--brand:#0B66FF;--border:#e5e7eb;--shadow:0 10px 30px rgba(2,6,23,.08)}
  .chat__fab{
    position:fixed; right:18px; bottom:18px; z-index:9999;
    width:56px; height:56px; border-radius:50%; border:none; cursor:pointer;
    background:var(--brand); color:#fff; font-size:22px; box-shadow:var(--shadow);
  }
  .chat__panel{
    position:fixed; right:18px; bottom:86px; z-index:9999;
    width:360px; max-width:calc(100vw - 36px); background:#fff;
    border:1px solid var(--border); border-radius:14px; box-shadow:var(--shadow);
    display:flex; flex-direction:column; overflow:hidden;
  }
  .chat__head{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:#f8fafc;border-bottom:1px solid var(--border)}
  .chat__brand{font-weight:700}
  .chat__close{background:none;border:none;font-size:20px;cursor:pointer;color:#334155}
  .chat__log{height:360px;overflow:auto;padding:12px;background:#fafbff;display:flex;flex-direction:column;gap:8px}
  .msg{max-width:85%;padding:10px 12px;border-radius:12px;line-height:1.45}
  .msg--ai{background:#ffffff;border:1px solid var(--border)}
  .msg--me{background:#0B66FF;color:#fff;margin-left:auto}
  .chat__form{display:flex;gap:8px;padding:10px;border-top:1px solid var(--border);background:#fff}
  .chat__input{flex:1;padding:10px 12px;border:1px solid var(--border);border-radius:10px}
  .chat__send{padding:10px 14px;border:none;border-radius:10px;background:#0B66FF;color:#fff;font-weight:600;cursor:pointer}
  .chat__quick{display:flex;gap:8px;padding:8px 10px;border-top:1px dashed var(--border);background:#fff;flex-wrap:wrap}
  .chip{border:1px solid var(--border);background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}
  @media (max-width: 440px){.chat__panel{right:8px;left:8px;width:auto}}
</style>

<div id="chat-root">
  <button id="chat-toggle" class="chat__fab" aria-label="Open chat">üí¨</button>

  <div id="chat-panel" class="chat__panel" hidden>
    <div class="chat__head">
      <div class="chat__brand">Clarity Assistant</div>
      <button id="chat-close" class="chat__close" aria-label="Close">√ó</button>
    </div>

    <div id="chat-log" class="chat__log" role="log" aria-live="polite"></div>

    <form id="chat-form" class="chat__form" autocomplete="off">
      <input id="chat-input" class="chat__input" type="text" placeholder="Type here‚Ä¶" />
      <button class="chat__send" type="submit">Send</button>
    </form>

    <div class="chat__quick">
      <button class="chip" data-q="NEW">Start</button>
      <button class="chip" data-q="MINE">My clinic</button>
      <button class="chip" data-q="NEARBY">Nearby</button>
      <button class="chip" data-q="HELP">Help</button>
    </div>
  </div>
</div>

<script>
  // ===== Config =====
  const API_URL = "https://clarity-mo5i.onrender.com"; // your Render backend

  // ===== Persistent user id =====
  function getUserId(){
    const k="clarity_user_id";
    let id=localStorage.getItem(k);
    if(!id){ id="u_"+Math.random().toString(36).slice(2)+Date.now().toString(36); localStorage.setItem(k,id); }
    return id;
  }
  const USER_ID = getUserId();

  // ===== DOM =====
  const panel = document.getElementById("chat-panel");
  const toggle = document.getElementById("chat-toggle");
  const closeBtn = document.getElementById("chat-close");
  const log = document.getElementById("chat-log");
  const form = document.getElementById("chat-form");
  const input = document.getElementById("chat-input");
  const quick = document.querySelectorAll(".chip");

  // ===== UI helpers =====
  function addMsg(text, who="ai"){
    const div=document.createElement("div");
    div.className=`msg ${who==="me"?"msg--me":"msg--ai"}`;
    div.textContent=text;
    log.appendChild(div);
    log.scrollTop=log.scrollHeight;
  }
  function setBusy(b){
    input.disabled=b;
    form.querySelector("button[type=submit]").disabled=b;
  }

  // ===== API =====
  async function sendToAssistant(message){
    setBusy(true);
    try{
      const res = await fetch(API_URL + "/app-chat", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({ userId: USER_ID, message })
      });
      const data = await res.json();
      if(!data.ok) throw new Error(data.error||"Server error");
      addMsg(data.reply,"ai");
    }catch(e){
      console.error(e);
      addMsg("Hmm, I couldn‚Äôt reach the assistant. Please try again.","ai");
    }finally{
      setBusy(false);
    }
  }

  // ===== Events =====
  toggle.addEventListener("click", ()=>{
    panel.hidden = !panel.hidden;
    if(!panel.hidden && log.children.length===0){
      addMsg("Welcome to Clarity ‚Äî I‚Äôll grab the details and book for you. Type NEW to begin, or tap Start.");
    }
  });
  closeBtn.addEventListener("click", ()=> panel.hidden = true);

  form.addEventListener("submit",(e)=>{
    e.preventDefault();
    const text=input.value.trim();
    if(!text) return;
    addMsg(text,"me");
    input.value="";
    sendToAssistant(text);
  });

  quick.forEach(btn=>{
    btn.addEventListener("click",()=>{
      const q=btn.dataset.q;
      addMsg(q,"me");
      sendToAssistant(q);
    });
  });

  // auto-open first visit
  if(!sessionStorage.getItem("clarity_opened")){
    toggle.click();
    sessionStorage.setItem("clarity_opened","1");
  }
</script>
<!-- ===== /Clarity Chat ===== -->

<body>
  <header class="nav">
    <div class="container nav__inner">
      <div class="brand">
        <div class="brand__logo">‚óé</div>
        <div class="brand__name">Clarity Health Concierge</div>
      </div>
      <nav class="nav__links">
        <a href="#how">How it works</a>
        <a href="#sms-optin">SMS Program</a>
        <a href="privacy.html">Privacy</a>
        <a href="terms.html">Terms</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero">
  <div class="container hero__inner">
    <div class="hero__copy">
      <h1>Your AI-powered medical appointment assistant</h1>
      <p class="lead">
        Clarity Health Concierge helps patients schedule and confirm appointments through secure, automated text messaging. 
        We contact your clinic on your behalf ‚Äî no app downloads or long hold times.
      </p>
      <p class="cta">
        <a class="btn btn--primary" href="sms:+18337224939">Text NEW to (833) 722-4939</a>
        <span class="cta__alt">Prefer to call? <a href="tel:+18337224939">(833) 722-4939</a></span>
      </p>
      <ul class="badges">
        <li>Transactional only</li>
        <li>Twilio powered</li>
        <li>Human-verified bookings</li>
      </ul>
    </div>

    <div class="hero__photo">
      <img src="https://images.pexels.com/photos/8867435/pexels-photo-8867435.jpeg?auto=compress&cs=tinysrgb&w=1600"
           alt="AI concierge assisting with medical appointment scheduling">
    </div>
  </div>
</section>



    <!-- How it works -->
    <section id="how" class="section section--alt">
      <div class="container steps">
        <div class="step"><div class="step__num">1</div><h4>Text NEW</h4><p>Answer a few quick questions.</p></div>
        <div class="step"><div class="step__num">2</div><h4>We call the clinic</h4><p>We secure the earliest slot.</p></div>
        <div class="step"><div class="step__num">3</div><h4>Get confirmation</h4><p>Time and ‚Äúwhat to bring.‚Äù</p></div>
      </div>
    </section>

    <!-- SMS Consent (keep your exact wording) -->
    <section id="sms-optin" class="section consent">
      <div class="container narrow">
        <h2>SMS Consent Disclosure</h2>
        <!-- keep your existing paragraphs exactly as they are here -->
        <p>By texting <strong>NEW</strong> to <a href="sms:+18337224939">+1 (833) 722-4939</a>, you consent to receive <strong>transactional messages</strong> from Clarity Health Concierge regarding appointment scheduling, confirmations, and reminders.</p>
        <p>No marketing messages will be sent. Message &amp; data rates may apply. Message frequency varies. Reply <strong>STOP</strong> to opt out or <strong>HELP</strong> for help.</p>
        <p>See our <a href="privacy.html">Privacy Policy</a> and <a href="terms.html">Terms of Service</a>.</p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <div class="brand brand--footer">
        <div class="brand__logo">‚óé</div>
        <div class="brand__name">Clarity Health Concierge</div>
      </div>
      <div class="footer__links">
        <a href="terms.html">Terms</a>
        <a href="privacy.html">Privacy</a>
        <a href="tel:+18337224939">(833) 722-4939</a>
      </div>
    </div>
    <div class="container">
      <p class="copyright">¬© 2025 Clarity Health Concierge. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
